{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Product List</title>
{% endblock meta %}

{% block content %}
{% csrf_token %}

<div class="product-list"></div>


<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    function loadData() {
        console.log("Load Data")
        $(document).ready(function () {
            $.get("{%url 'product:get_product'%}", function (data) {
                console.log(data)
                $.each(data, function (key, value) {
                    var product = `
                        <div class="row mb-4 d-flex justify-content-between align-items-center id="item-${value.pk}">
                        <div class="col-md-2 col-lg-2 col-xl-2">
                            <img src="/media/${value.fields.image}"
                            class="img-fluid rounded-3" id="item-${value.pk}-image">
                        </div>
                        <div class="col-md-3 col-lg-3 col-xl-3">
                            <h5 class="text-black mb-0" id="item-${value.pk}-name">${value.fields.name}</h5>
                            <h5 class="mb-0" id="item-${value.pk}-price">Rp${value.fields.price}</h5>
                        </div>

                        </div>
                        <hr class="my-4">
                        `
                    $(".product-list").append(product)
                })
            })
        })
    }

    loadData()
</script>
{% endblock content %}